<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				   xmlns:s="library://ns.adobe.com/flex/spark" 
				   xmlns:mx="library://ns.adobe.com/flex/mx" 
				   width="100%" height="114" borderColor="0x999999" 
				   borderStyle="inset" borderWeight="1" cornerRadius="8"
				   scaleX="{dataShop.appWidth == 1920 ? 1 : 0.8}" 
				   scaleY="{dataShop.appWidth == 1920 ? 1 : 0.8}">
				   <!-- was scaleX="0.8" scaleY="0.8" for 1600x900, 1 for 1920x1080 -->
	
	<fx:Metadata>
		[Event(name="instrumentClicked", type="flash.events.MouseEvent")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			
			import org.cim.DataShop;
			import org.cim.vo.Instrument;
			
			[Bindable]
			/**
			 * The app's data shop.
			 */
			private var dataShop:DataShop = DataShop.instance;
			
			/**
			 * Propagates a mouse click event from the list 
			 * as an event dispatched from this entire component.
			 */
			private function dispatchInstrumentClicked(e:Event):void {
				this.dispatchEvent(new MouseEvent("instrumentClicked"));
			}
			
			/**
			 * Gets the currently selected instrument from the list.
			 */
			public function getSelectedItem():Instrument {
				return instrumentList.selectedItem as Instrument;
			}
			
			/**
			 * Clears the selection made in the list.
			 */
			public function clearSelectedItem():void {
				instrumentList.selectedItem = null;
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<s:layout>
		<s:HorizontalLayout horizontalAlign="center" verticalAlign="middle" 
							paddingTop="8" paddingLeft="8" paddingBottom="8" 
							paddingRight="8" />
	</s:layout>
	
	<s:List id="instrumentList" height="100%" width="100%" click="dispatchInstrumentClicked(event)" focusEnabled="false"
			dataProvider="{new ArrayCollection(dataShop.instrumentService.getParentInstruments.lastResult)}" 
			itemRenderer="org.cim.components.InstrumentSquare" borderVisible="false"  >
			<!-- width was 100% -->
		<s:layout>
			<s:HorizontalLayout gap="25" horizontalAlign="left" verticalAlign="middle"
								paddingLeft="12" paddingRight="12" /> <!-- gap was 58 -->
		</s:layout>
	</s:List>
	
	<!-- Temporary "more coming" label -->
	<!--<s:Label id="moreLabel" width="100%" text="More instruments to come..." fontSize="20" />-->
</s:BorderContainer>
